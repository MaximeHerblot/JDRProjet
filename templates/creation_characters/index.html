{% extends 'base.html.twig' %}

{% block title %}Hello CreationCharactersController!{% endblock %}
{% block stylesheets %}
#race{
    margin-bottom:10px;
}
{% endblock %}
{% block javascripts %}
<!--  -->
function recoverData(){
    
    data = document.querySelector("#form").children
    list = {}
    j = 0
    for (let i = 0;i < data.length; i++){
        if (typeof data[i].name !== 'undefined') {
            if (data[i].name.slice(-4)=="Data"){
                j++
                id = data[i].id
                value = data[i].value
                list[id] = value
            }
        }
        
    }
    return (list);
}

$("button")[0].onclick = function() {
    <!-- Appelle de la fonction pour récupérer les données -->
    console.log("KEKW")
    
    {#firstname = qs("#FNCharacters").value;
    lastname = qs("#LNCharacters").value;
    age = qs("#age").value;
       
    Description = qs("#Description").value;
        
    userId = qs('#userId').value;
    raceId = qs("#race").value; #}
    list = recoverData()
    $.ajax({
        url:"/creation/characters/requete",
        type:"POST",
        data:list,
    }).done((e)=>{
        $("#form").hidden()
        $("#resultat").show()
        console.log(e.lastname)
    })



}
<!-- {firstname:firstname,lastname:lastname,age:age,Description:Description,userId:userId,raceId:raceId} -->
{% endblock %}
{% block body %}
<h1>Bienvenue dans la création de personnage</h1>
<div id="form" action="/creation/characters/requete">
    <label for="lastname">Ici le nom de votre personnage</label>
    <input required id="lastname" type="text" name="LNData" placeholder="Nom du personnage">
    <br>
    <label for="firstname">Veuillez ensuite entré le prénom de votre personnage</label>
    <input required type="text" name="FNData" id="firstname" placeholder="Prénom du personnage">
    <br>
    <label for="age">Qu'elle age a ton personnage?</label>
    <input required type="number" name="ageData" id="age" placeholder="Âge" min="0" max="1000">
    <br>
    <h6>Entré une description de votre personnage</h6>
    <textarea required name="DescriptionData" id="Description" cols="100" rows="10"></textarea>
    <br>
    <select name="raceData" id="raceId">
    {% for Race in RepoRace %}
        <option value={{Race.id}}>{{Race.Name}}</option>
        <!-- Création de la liste déroulante -->
        
        <!---->
    {% endfor %}
    </select>
    </br>
    <input id="userId" name="userIdData" type="hidden" value="{{app.user.id}}">
    <button id="formSubmit" class="btn">Création du personnage</button>
</div>

<div id="resultat" hidden>
    <h1>Voici le récapitulatif de la création de personnage</h1>

</div>

{% endblock %}
